$(window).load(function(){
	Nav.init("navigation");

	
	Recalot.renderItem = function(data){
		if(data != null && data.content != null && data.content.content != null) {
			var item = JSON.parse(data.content.content);
			var div = $("<div class='wallpaper-small'></div>");
			div.append("<h4>" + (item.Title || "[[no-title]]") +  "</h4>");
			var img = $("<img />");
			img.attr("src", item.Src);
			img.attr("title", item.Title);
			img.attr("alt", item.Title);
			
			div.append(img);
			
			var details = "<div class='details'>" +
					"<div>Categories:" +
					"<ul class='tags'></ul>" + 
					"</div>" +
					"<div class='stars'>" +
						"<form action=''>" + 
						  "<input class='star star-5' id='star-5" + item.Id + "' type='radio' name='star'>" +
						  "<label class='star star-5' for='star-5" + item.Id + "'></label>" +
						  "<input class='star star-4' id='star-4" + item.Id + "' type='radio' name='star'>" +
						  "<label class='star star-4' for='star-4" + item.Id + "'></label>" +
						  "<input class='star star-3' id='star-3" + item.Id + "' type='radio' name='star'>" +
						  "<label class='star star-3' for='star-3" + item.Id + "'></label>"+
						  "<input class='star star-2' id='star-2" + item.Id + "' type='radio' name='star'>" +
						  "<label class='star star-2' for='star-2" + item.Id + "'></label>" +
						  "<input class='star star-1' id='star-1" + item.Id + "' type='radio' name='star'>" +
						  "<label class='star star-1' for='star-1" + item.Id + "'></label>" +
						"</form>"+
					"</div>"+
					"<div>"+
						"<a class='download' href='javascript:void(0)'>Download</a>" +
					"</div>"+
				"</div>";
			
			var $details = $(details);
			div.append($details);
			
			var cats = $details.children("div").children("ul.tags");
			
			if(item.Categories != null) {
				for(var i = 0; i < item.Categories.length; i++) {
					var li = $("<li><a >" +  item.Categories[i] + "</a></li>");
					li.children("a").attr("href", "cats.html?cat=" + encodeURIComponent(item.Categories[i].toLowerCase()));
					cats.append(li);
				}
			}
			
			console.log(item);
		
			return div;
		
		}
	};
	Recalot.fetch();
	
	
	 $("#paginator").pagination({
        items: 100,
        itemsOnPage: 10,
        cssStyle: 'dark-theme',
		hrefTextPrefix: '?page='
    });
});



